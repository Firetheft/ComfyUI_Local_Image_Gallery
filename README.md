<div align="center">

# ComfyUI Local Media Manager
### The Ultimate Local File Manager for Images, Videos, and Audio in ComfyUI
### ‰∏Ä‰∏™‰∏∫ ComfyUI ÊâìÈÄ†ÁöÑÁªàÊûÅÊú¨Âú∞ÂõæÁâá„ÄÅËßÜÈ¢ë„ÄÅÈü≥È¢ëÂ™í‰ΩìÁÆ°ÁêÜÂô®

</div>

![QQÊà™Âõæ20250821133258 (1)](https://github.com/user-attachments/assets/efbbd721-6b75-4bdc-be9f-5988474fbc0f)

---

## üá¨üáß English

### Changelog (2025-09-17)
* **Full File Management**: Integrated complete file management capabilities. You can now **Move**, **Delete** (safely to trash), and **Rename** files directly from the UI.
* **Major UI/UX Upgrade**:
    * Replaced the simple path text field with an interactive **Breadcrumb Navigation Bar** for intuitive and fast directory traversal.
    * Added **Batch Action** buttons (`All`, `Move`, `Delete`) to efficiently manage multiple selected files at once.
    * The "Edit Tags" panel now reveals a **Rename** field when a single file is selected for editing.
* **Huge Performance Boost**:
    * Implemented a high-performance **Virtualized Scrolling Gallery**. This dramatically improves performance and reduces memory usage, allowing smooth browsing of folders containing thousands of files.
    * Upgraded the backend with a **Directory Cache** and a robust **Thumbnail Caching System** (including support for video thumbnails) to disk, making subsequent loads significantly faster.
* **Advanced Media Processing Nodes**: Introduced a suite of powerful downstream nodes to precisely control and use your selected media:
    * **Select Original Image**: Selects a specific image from a multi-selection, resizes it with various aspect ratio options, and extracts its embedded prompts.
    * **Select Original Video**: Extracts frames from a selected video with fine-grained controls (frame rate, count, skipping), resizes them, and separates the audio track.
    * **Select Original Audio**: Isolates a specific segment from a selected audio file based on start time and duration.
* **One-Click Workflow Loading**:
    * Now you can load ComfyUI workflows directly from images **and videos** that contain embedded metadata, simply by clicking the new "Workflow" badge.

### Changelog (2025-09-07)
* **Critical Bug Fix**: Fixed a core issue where selecting a new media file while the prompt queue was running could cause the workflow to process the wrong item. The selection is now correctly "locked in" for a task when you queue the prompt, ensuring accurate and predictable results.

### Changelog (2025-09-02)
* **Optimized Unique ID**: Each gallery node now automatically generates and stores its own unique ID, which is synchronized with the workflow. This completely avoids conflicts between different workflows or nodes.

### Update Log (2025-08-31)
* **New Node: Select Original Image**: In multi-image selection mode, this node can be connected to the gallery's ‚Äúimage_path‚Äù output interface to retrieve the original image by index. Multiple ‚ÄúSelect Original Image‚Äù nodes can be used simultaneously.
* **Compact Gallery UI**: A small CSS tweak was made to make the ‚ÄúLocal Media Manager‚Äù node UI more compact.

### Update Log (2025-08-30)
* **Multi-Select Dropdown**: The previous tag filter has been upgraded to a full-featured multi-select dropdown menu, allowing you to combine multiple tags by checking them.
* **AND/OR Logic Toggle**: A new AND/OR button lets you precisely control the filtering logic for multiple tags (matching all tags vs. matching any tag).

### Update Log (2025-08-27)
* **Major Upgrade**: Implemented a comprehensive **Workflow Memory** system. The node now remembers all UI settings (path, selections, sorting, filters) and restores them on reload.
* **Advanced Features**: Added **Multi-Select** with sequence numbers (`Ctrl+Click`), batch **Tag Editing**, and intelligent **Batch Processing** for images of different sizes.
---

### Overview

**ComfyUI Local Media Manager** is a powerful, all-in-one custom node that brings a complete local file management system directly into your ComfyUI workflow. This single, unified node allows you to browse, manage, rate, tag, and select local images, videos, and audio files, then instantly use them or their metadata in your projects. It eliminates the need to constantly switch to your OS file explorer, dramatically speeding up your creative and organizational process.

The gallery features a high-performance virtualized scrolling layout, a robust caching system, and an advanced lightbox viewer, ensuring a beautiful and efficient management experience even with massive media libraries.

### Features

-   **All-in-One Media Hub**: Browse images, videos, and audio files within a single, powerful node.
-   **Complete File Management**:
    -   **Move**: Move selected files to another directory. Supports path presets for quick access.
    -   **Delete**: Safely sends selected files to the system's Recycle Bin or Trash.
    -   **Rename**: Rename individual files directly within the UI.
-   **Full Metadata Management**:
    -   **Star Rating**: Assign a rating from 1 to 5 stars. Click a star to rate, click it again to unrate.
    -   **Tagging System**: Add or remove custom tags for individual or multiple files at once.
-   **Advanced Navigation & Search**:
    -   Interactive **Breadcrumb Navigation Bar** for easy directory traversal.
    -   **Path Presets** to save and quickly jump to your favorite folders.
    -   **Global Tag Search**: Search for files with specific tags across **all your drives and folders**.
    -   **Multi-Tag Filtering**: Combine multiple tags with **AND/OR** logic for precise searching.
-   **High-Performance Gallery**:
    -   A **virtualized scrolling** waterfall layout that handles thousands of files with ease and low memory usage.
    -   Backend **caching** for directories and thumbnails (including videos) for near-instant loading.
-   **Advanced Lightbox Viewer**:
    -   Double-click any media file to open a full-screen preview.
    -   **Image Viewer**: Supports zooming (mouse wheel) and panning (drag).
    -   **Video/Audio Player**: Provides full playback controls.
    -   **Gallery Navigation**: Use on-screen arrows or keyboard keys to cycle through media.
-   **Workflow Integration**:
    -   **One-Click Workflow Loading** from images and videos via a "Workflow" badge.
    -   A suite of **downstream nodes** for advanced processing of selected media.

### ‚ö†Ô∏è Important Note on Dependencies

To support powerful new features like video processing and safe file deletion, this version requires a few additional Python libraries.

**New Dependencies & Their Purpose:**
* **`moviepy`**: Used to generate thumbnails for video files in the gallery.
* **`opencv-python-headless`**: Powers the frame extraction feature in the `Select Original Video` node.
* **`torchaudio`**: Enables audio processing for the `Select Original Audio` and `Select Original Video` nodes.
* **`send2trash`**: Ensures that deleting files is safer by sending them to the system's Recycle Bin/Trash instead of permanently deleting them.

**Installation:**
The easiest way to install these is through the **ComfyUI Manager**. After updating the custom node, the manager should detect the missing dependencies and prompt you to install them.

If you prefer to install them manually, you can navigate to this custom node's directory (`ComfyUI/custom_nodes/ComfyUI_Local_Image_Gallery/`) in your terminal and run:
`pip install -r requirements.txt`

### Installation

1.  Navigate to your ComfyUI installation directory.
2.  Go to the `ComfyUI/custom_nodes/` folder.
3.  Clone or download this repository into the `custom_nodes` folder. The final folder structure should be `ComfyUI/custom_nodes/ComfyUI_Local_Image_Gallery/`.
4.  Restart ComfyUI.

### How to Use

#### 1. Main Node: `Local Media Manager`
This is your central hub for all media operations.

* **Browsing**:
    * Click on the **breadcrumb navigation bar** to jump to parent directories or to manually type/paste a full path and press `Enter`.
    * Use the **Path Presets** dropdown to save and quickly access frequent folders.
    * Click the `‚¨ÜÔ∏è Up` button to go to the parent directory.
* **Selection**:
    * **Single Select**: Click a card to select it.
    -   **Multi-Select**: `Ctrl+Click` to select multiple files. A sequence number will appear on each selected card.
    -   **Select All**: Click the `All` button to select all visible files.
* **File Management**:
    * With files selected, use the `‚ûî Move` and `üóëÔ∏è Delete` buttons for batch operations.
    * To **Rename**, select a single file, click the `‚úèÔ∏è` icon on its card, and the rename field will appear in the "Edit Tags" panel above the gallery.
* **Metadata**:
    -   **Rating**: Click the stars on any card to assign a rating.
    -   **Tagging**: Select one or more files. The "Edit Tags" panel will appear. Type a tag and press `Enter` to add it to all selected files. Click the `‚ìß` on a tag to remove it.

#### 2. Downstream Nodes
Connect these nodes to the outputs of the `Local Media Manager` to process your selections.

* **`Select Original Image`**
    -   **Purpose**: To isolate a single image from a multi-selection and prepare it for your workflow.
    -   **Inputs**:
        -   `paths`: Connect to the `paths` output of the main gallery node.
        -   `index`: The sequence number (0, 1, 2...) of the image you want to select from the batch.
        -   `generation_width`/`height`: Desired output dimensions.
        -   `aspect_ratio_preservation`: How to handle resizing (stretch, crop, etc.).
    -   **Outputs**:
        -   `image`: The processed image tensor.
        -   `positive_prompt`/`negative_prompt`: Extracts prompts from the image's metadata, if available.

* **`Select Original Video`**
    -   **Purpose**: To extract image frames and/or audio from a selected video file.
    -   **Inputs**:
        -   `paths`: Connect to the `paths` output of the main gallery node.
        -   `index`: The sequence number of the video you want to select.
        -   `frame_load_cap`: The maximum number of frames to extract.
        -   `force_rate`: Force a specific frame rate for the output sequence.
        -   `skip_first_frames`: Start extraction after skipping a number of initial frames.
        -   `select_every_nth`: Sample the video by taking only every Nth frame.
    -   **Outputs**:
        -   `IMAGE`: A batch of image frames ready for use.
        -   `audio`: The extracted audio track from the video.

* **`Select Original Audio`**
    -   **Purpose**: To load and trim a specific segment from an audio file.
    -   **Inputs**:
        -   `paths`: Connect to the `paths` output of the main gallery node.
        -   `index`: The sequence number of the audio file you want to select.
        -   `seek_seconds`: The start time (in seconds) for the audio clip.
        -   `duration`: The desired length (in seconds) of the audio clip.
    -   **Outputs**:
        -   `audio`: The trimmed audio data.

---

## üá®üá≥ ‰∏≠Êñá

### Êõ¥Êñ∞Êó•Âøó (2025-09-17)
* **ÂÆåÊï¥ÁöÑÊñá‰ª∂ÁÆ°ÁêÜÂäüËÉΩ**ÔºöÈõÜÊàê‰∫ÜÂÖ®Èù¢ÁöÑÊñá‰ª∂ÁÆ°ÁêÜËÉΩÂäõ„ÄÇÁé∞Âú®ÊÇ®ÂèØ‰ª•Áõ¥Êé•Âú®UIÁïåÈù¢‰∏≠**ÁßªÂä®**„ÄÅ**Âà†Èô§**ÔºàÂÆâÂÖ®ÁßªËá≥ÂõûÊî∂Á´ôÔºâÂíå**ÈáçÂëΩÂêç**Êñá‰ª∂„ÄÇ
* **UI/UX ÈáçÂ§ßÂçáÁ∫ß**Ôºö
    * ‰ΩøÁî®‰∫§‰∫íÂºèÁöÑ**Èù¢ÂåÖÂ±ëÂØºËà™Ê†è**Êõø‰ª£‰∫ÜÂéüÊúâÁöÑÁ∫ØÊñáÊú¨Ë∑ØÂæÑËæìÂÖ•Ê°ÜÔºå‰ΩøÊñá‰ª∂Â§πË∑≥ËΩ¨Êõ¥Áõ¥ËßÇ„ÄÅÊõ¥Âø´Êç∑„ÄÇ
    * Êñ∞Â¢û‰∫Ü**ÊâπÈáèÊìç‰Ωú**ÊåâÈíÆÔºà`All`„ÄÅ`Move`, `Delete`ÔºâÔºå‰ª•È´òÊïàÂú∞ÂêåÊó∂ÁÆ°ÁêÜÂ§ö‰∏™ÈÄâÂÆöÊñá‰ª∂„ÄÇ
    * ÂΩìÈÄâ‰∏≠Âçï‰∏™Êñá‰ª∂ËøõË°åÁºñËæëÊó∂Ôºå‚ÄúÁºñËæëÊ†áÁ≠æ‚ÄùÈù¢Êùø‰∏≠‰ºöÊòæÁ§∫**ÈáçÂëΩÂêç**ËæìÂÖ•Ê°Ü„ÄÇ
* **Â∑®Â§ßÁöÑÊÄßËÉΩÊèêÂçá**Ôºö
    * ÂÆûÁé∞‰∫ÜÈ´òÊÄßËÉΩÁöÑ**ËôöÊãüÂåñÊªöÂä®ÂõæÂ∫ì**„ÄÇËøôÊûÅÂ§ßÂú∞ÊèêÂçá‰∫ÜÊÄßËÉΩÂπ∂Èôç‰Ωé‰∫ÜÂÜÖÂ≠òÂç†Áî®ÔºåÂç≥‰ΩøÊòØÂåÖÂê´Êï∞ÂçÉ‰∏™Êñá‰ª∂ÁöÑÊñá‰ª∂Â§π‰πüËÉΩÊµÅÁïÖÊµèËßà„ÄÇ
    * ÂçáÁ∫ß‰∫ÜÂêéÁ´ØÔºå‰∏∫ÁõÆÂΩïÂàóË°®ÂíåÁº©Áï•ÂõæÔºàÂåÖÊã¨Êñ∞Â¢ûÁöÑËßÜÈ¢ëÁº©Áï•ÂõæÊîØÊåÅÔºâÊèê‰æõ‰∫ÜÂº∫Â§ßÁöÑ**Á£ÅÁõòÁºìÂ≠òÁ≥ªÁªü**ÔºåÊòæËëóÂä†Âø´‰∫Ü‰∫åÊ¨°Âä†ËΩΩÈÄüÂ∫¶„ÄÇ
* **Êñ∞Â¢ûÈ´òÁ∫ßÂ™í‰ΩìÂ§ÑÁêÜËäÇÁÇπ**ÔºöÂºïÂÖ•‰∫Ü‰∏ÄÂ•óÂº∫Â§ßÁöÑ‰∏ãÊ∏∏ËäÇÁÇπÔºå‰ª•Á≤æÁ°ÆÊéßÂà∂Âíå‰ΩøÁî®ÊÇ®ÈÄâÊã©ÁöÑÂ™í‰ΩìÔºö
    * **Select Original Image**Ôºö‰ªéÂ§öÈÄâÁöÑÂõæÁâá‰∏≠ÈÄâÂèñÊåáÂÆö‰∏ÄÂº†ÔºåÈÄöËøá‰∏∞ÂØåÁöÑÂÆΩÈ´òÊØîÈÄâÈ°πË∞ÉÊï¥ÂÖ∂Â∞∫ÂØ∏ÔºåÂπ∂ÊèêÂèñÂÖ∂ÂÜÖÂµåÁöÑÊèêÁ§∫ËØç„ÄÇ
    * **Select Original Video**Ôºö‰ªéÊåáÂÆöÁöÑËßÜÈ¢ë‰∏≠ÊèêÂèñÂ∏ßÂ∫èÂàóÔºåÊèê‰æõÁ≤æÁªÜÁöÑÊéßÂà∂ÈÄâÈ°πÔºàÂ∏ßÁéá„ÄÅÊï∞Èáè„ÄÅË∑≥ËøáÂ∏ßÊï∞ÔºâÔºåË∞ÉÊï¥Â∞∫ÂØ∏ÔºåÂπ∂ÂàÜÁ¶ªÂá∫Èü≥È¢ëËΩ®ÈÅì„ÄÇ
    * **Select Original Audio**ÔºöÊ†πÊçÆÂºÄÂßãÊó∂Èó¥ÂíåÊåÅÁª≠Êó∂ÈïøÔºå‰ªé‰∏Ä‰∏™Èü≥È¢ëÊñá‰ª∂‰∏≠Á≤æÁ°ÆÊà™ÂèñÊâÄÈúÄÁöÑÁâáÊÆµ„ÄÇ
* **‰∏ÄÈîÆÂä†ËΩΩÂ∑•‰ΩúÊµÅ**Ôºö
    * Áé∞Âú®ÂèØ‰ª•‰ªéÂÜÖÂµå‰∫ÜÂÖÉÊï∞ÊçÆÁöÑÂõæÁâá**ÂíåËßÜÈ¢ë**‰∏≠Áõ¥Êé•Âä†ËΩΩ ComfyUI Â∑•‰ΩúÊµÅÔºåÂè™ÈúÄÂçïÂáªÊñ∞Â¢ûÁöÑ‚ÄúWorkflow‚ÄùÂæΩÁ´†Âç≥ÂèØ„ÄÇ

### Êõ¥Êñ∞Êó•Âøó (2025-09-07)
* **ÈáçÂ§ßBUG‰øÆÂ§ç**Ôºö‰øÆÂ§ç‰∫Ü‰∏Ä‰∏™Ê†∏ÂøÉÈóÆÈ¢òÔºåÂç≥Âú®‰ªªÂä°ÈòüÂàóÊ≠£Âú®Â§ÑÁêÜÊó∂ÈÄâÊã©Êñ∞ÁöÑÂ™í‰ΩìÊñá‰ª∂Ôºå‰ºöÂØºËá¥Â∑•‰ΩúÊµÅÂ§ÑÁêÜÈîôËØØÁöÑÈÄâÈ°π„ÄÇÁé∞Âú®ÔºåÂΩìÊÇ®ÁÇπÂáª‚ÄúÁîüÊàê‚ÄùÊó∂ÔºåÊâÄÈÄâÁöÑÂ™í‰Ωì‰ºöË¢´Ê≠£Á°ÆÂú∞‚ÄúÈîÅÂÆö‚ÄùÂà∞ËØ•‰ªªÂä°‰∏≠ÔºåÁ°Æ‰øù‰∫ÜÁªìÊûúÁöÑÂáÜÁ°ÆÊÄßÂíåÂèØÈ¢ÑÊµãÊÄß„ÄÇ

### Êõ¥Êñ∞Êó•Âøó (2025-09-02)
* **‰ºòÂåñÂîØ‰∏Ä ID**ÔºöÊØè‰∏™ÂõæÂ∫ìËäÇÁÇπÁé∞Âú®ÈÉΩ‰ºöËá™Âä®ÁîüÊàêÂπ∂‰øùÂ≠òÂÖ∂‰∏ìÂ±ûÁöÑÂîØ‰∏Ä IDÔºåÂπ∂‰∏éÂ∑•‰ΩúÊµÅÁ®ãÂêåÊ≠•„ÄÇËøôÂÆåÂÖ®ÈÅøÂÖç‰∫Ü‰∏çÂêåÂ∑•‰ΩúÊµÅÁ®ãÊàñËäÇÁÇπ‰πãÈó¥ÁöÑÂÜ≤Á™Å„ÄÇ

### Êõ¥Êñ∞Êó•Âøó (2025-08-31)
* **Êñ∞Â¢ûËäÇÁÇπÔºöSelect Original Image**: Âú®ÂõæÂÉèÂ§öÈÄâÁä∂ÊÄÅ‰∏ãÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ËäÇÁÇπ‰∏éÂõæÂ∫ìÁöÑ‚Äúimage_path‚ÄùËæìÂá∫Êé•Âè£Áõ∏ËøûÔºåÈÄâÊã©ÂØπÂ∫îÂ∫èÂè∑Ëé∑ÂèñÂéüÂßãÂõæÂÉèÔºåÂèØ‰ΩøÁî®Â§ö‰∏™‚ÄúSelect Original Image‚ÄùËäÇÁÇπ„ÄÇ
* **‰ΩøÂõæÂ∫ìUIÊõ¥Á¥ßÂáë**: ‰øÆÊîπ‰∫Ü‰∏ÄÂ∞èÊÆµCSSÂºèÊ†∑Ôºå‰Ωø‚ÄúLocal Media Manager‚ÄùËäÇÁÇπUIÂèòÂæóÁ¥ßÂáëËµ∑Êù•„ÄÇ

### Êõ¥Êñ∞Êó•Âøó (2025-08-30)
* **Â§öÈÄâ‰∏ãÊãâËèúÂçï**: ÂéüÊúâÁöÑÊ†áÁ≠æÁ≠õÈÄâÂô®Â∑≤ÂçáÁ∫ß‰∏∫ÂäüËÉΩÂÆåÂñÑÁöÑÂ§öÈÄâ‰∏ãÊãâËèúÂçïÔºåÂÖÅËÆ∏ÊÇ®ÈÄöËøáÂãæÈÄâÊù•ÁªÑÂêàÂ§ö‰∏™Ê†áÁ≠æËøõË°åÁ≠õÈÄâ„ÄÇ
* **AND/OR ÈÄªËæëÂàáÊç¢**: Êñ∞Â¢û‰∫Ü‰∏Ä‰∏™ AND/OR ÂàáÊç¢ÊåâÈíÆÔºåËÆ©ÊÇ®ÂèØ‰ª•Á≤æÁ°ÆÊéßÂà∂Â§öÊ†áÁ≠æÁöÑÁ≠õÈÄâÈÄªËæëÔºàÊòØÈúÄË¶ÅÊª°Ë∂≥ÊâÄÊúâÊ†áÁ≠æÔºåËøòÊòØÊª°Ë∂≥‰ªªÊÑè‰∏Ä‰∏™Ôºâ„ÄÇ

### Êõ¥Êñ∞Êó•Âøó (2025-08-27)
* **ÈáçÂ§ßÂçáÁ∫ß**: ÂÆûÁé∞‰∫ÜÂÆåÊï¥ÁöÑ **Â∑•‰ΩúÊµÅËÆ∞ÂøÜ** Á≥ªÁªü„ÄÇËäÇÁÇπÁé∞Âú®ÂèØ‰ª•ËÆ∞‰ΩèÊâÄÊúâUIËÆæÁΩÆÔºàË∑ØÂæÑ„ÄÅÈÄâÊã©È°π„ÄÅÊéíÂ∫è„ÄÅÁ≠õÈÄâÔºâÂπ∂Âú®ÈáçËΩΩÂêéÊÅ¢Â§ç„ÄÇ
* **È´òÁ∫ßÂäüËÉΩ**: Êñ∞Â¢û‰∫ÜÂ∏¶Â∫èÂè∑ÁöÑ **Â§öÈÄâÂäüËÉΩ** (`Ctrl+ÂçïÂáª`)„ÄÅÊâπÈáè **Ê†áÁ≠æÁºñËæë**Ôºå‰ª•ÂèäÂØπ‰∏çÂêåÂ∞∫ÂØ∏ÂõæÁâáÁöÑÊô∫ËÉΩ **ÊâπÂ§ÑÁêÜ**„ÄÇ
---

### Ê¶ÇËø∞

**ComfyUI Êú¨Âú∞Â™í‰ΩìÁÆ°ÁêÜÂô®** ÊòØ‰∏Ä‰∏™ÂäüËÉΩÂº∫Â§ß„ÄÅ‰∏Ä‰ΩìÂåñÁöÑËá™ÂÆö‰πâËäÇÁÇπÔºåÂÆÉÂ∞Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊú¨Âú∞Êñá‰ª∂ÁÆ°ÁêÜÁ≥ªÁªüÁõ¥Êé•ÈõÜÊàêÂà∞‰∫ÜÊÇ®ÁöÑ ComfyUI Â∑•‰ΩúÊµÅ‰∏≠„ÄÇËøô‰∏Ä‰∏™Áªü‰∏ÄÁöÑËäÇÁÇπÂÖÅËÆ∏ÊÇ®ÊµèËßà„ÄÅÁÆ°ÁêÜ„ÄÅËØÑÁ∫ß„ÄÅÊ†áËÆ∞ÂíåÈÄâÊã©Êú¨Âú∞ÁöÑÂõæÁâá„ÄÅËßÜÈ¢ëÂíåÈü≥È¢ëÊñá‰ª∂ÔºåÂπ∂ËÉΩ‰∏ÄÈîÆÂ∞ÜÂÆÉ‰ª¨Êú¨Ë∫´ÊàñÂÖ∂ÂÖÉÊï∞ÊçÆÂØºÂÖ•Âà∞ÊÇ®ÁöÑÈ°πÁõÆ‰∏≠„ÄÇÂÆÉÂΩªÂ∫ïÊ∂àÈô§‰∫ÜÂú®Êìç‰ΩúÁ≥ªÁªüÊñá‰ª∂ÊµèËßàÂô®ÂíåComfyUI‰πãÈó¥Êù•ÂõûÂàáÊç¢ÁöÑÁÉ¶ÊÅºÔºåÊûÅÂ§ßÂú∞Âä†ÈÄü‰∫ÜÊÇ®ÁöÑÂàõ‰ΩúÂíåÊï¥ÁêÜÊµÅÁ®ã„ÄÇ

Êú¨Êèí‰ª∂ÁöÑÂõæÂ∫ìÊã•Êúâ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑËôöÊãüÂåñÊªöÂä®Â∏ÉÂ±Ä„ÄÅÂº∫Â§ßÁöÑÁºìÂ≠òÁ≥ªÁªüÂíå‰∏Ä‰∏™È´òÁ∫ßÁöÑÁÅØÁÆ±È¢ÑËßàÂô®ÔºåÂç≥‰ΩøÈù¢ÂØπÊµ∑ÈáèÂ™í‰ΩìÂ∫ìÔºå‰πüËÉΩÁ°Æ‰øùÁæéËßÇ‰∏îÈ´òÊïàÁöÑÁÆ°ÁêÜ‰ΩìÈ™å„ÄÇ

### ÂäüËÉΩÁâπÊÄß

-   **‰∏Ä‰ΩìÂåñÂ™í‰Ωì‰∏≠ÂøÉ**: Âú®‰∏Ä‰∏™Âº∫Â§ßÁöÑËäÇÁÇπÂÜÖÂç≥ÂèØÊµèËßàÂõæÁâá„ÄÅËßÜÈ¢ëÂíåÈü≥È¢ëÊñá‰ª∂„ÄÇ
-   **ÂÆåÊï¥ÁöÑÊñá‰ª∂ÁÆ°ÁêÜ**:
    -   **ÁßªÂä®**: Â∞ÜÈÄâ‰∏≠Êñá‰ª∂ÁßªÂä®Âà∞ÂÖ∂‰ªñÁõÆÂΩïÔºåÊîØÊåÅË∑ØÂæÑÈ¢ÑËÆæ‰ª•‰æøÂø´ÈÄüËÆøÈóÆ„ÄÇ
    -   **Âà†Èô§**: ÂÆâÂÖ®Âú∞Â∞ÜÈÄâ‰∏≠Êñá‰ª∂ÁßªËá≥Êìç‰ΩúÁ≥ªÁªüÁöÑÂõûÊî∂Á´ô„ÄÇ
    -   **ÈáçÂëΩÂêç**: Áõ¥Êé•Âú®UIÁïåÈù¢ÂÜÖÈáçÂëΩÂêçÂçï‰∏™Êñá‰ª∂„ÄÇ
-   **ÂÆåÊï¥ÁöÑÂÖÉÊï∞ÊçÆÁÆ°ÁêÜ**:
    -   **ÊòüÁ∫ßËØÑÂàÜ**: ‰∏∫‰ªª‰ΩïÂ™í‰ΩìÊñá‰ª∂Ëµã‰∫à1Âà∞5ÊòüÁöÑËØÑÁ∫ß„ÄÇÂçïÂáªÊòüÊòüÂç≥ÂèØËØÑÂàÜÔºåÂÜçÊ¨°ÂçïÂáªÂèØ‰ª•ÂèñÊ∂àËØÑÂàÜ„ÄÇ
    -   **Ê†áÁ≠æÁ≥ªÁªü**: ‰∏∫Âçï‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÊâπÈáèÊ∑ªÂä†ÊàñÂà†Èô§Ëá™ÂÆö‰πâÊ†áÁ≠æ„ÄÇ
-   **È´òÁ∫ßÂØºËà™‰∏éÊêúÁ¥¢**:
    -   ‰∫§‰∫íÂºè**Èù¢ÂåÖÂ±ëÂØºËà™Ê†è**ÔºåËΩªÊùæËøõË°åÁõÆÂΩïË∑≥ËΩ¨„ÄÇ
    -   **Ë∑ØÂæÑÈ¢ÑËÆæ**ÂäüËÉΩÔºåÁî®‰∫é‰øùÂ≠òÂπ∂Âø´ÈÄüËÆøÈóÆÂ∏∏Áî®Êñá‰ª∂Â§π„ÄÇ
    -   **ÂÖ®Â±ÄÊ†áÁ≠æÊêúÁ¥¢**: Ë∑®Ë∂äÊÇ®ÊâÄÊúâÁöÑÁ°¨ÁõòÂíåÊñá‰ª∂Â§πÔºåÊêúÁ¥¢Â∏¶ÊúâÁâπÂÆöÊ†áÁ≠æÁöÑÊñá‰ª∂„ÄÇ
    -   **Â§öÊ†áÁ≠æÁ≠õÈÄâ**: ‰ΩøÁî® **AND/OR** ÈÄªËæëÁªÑÂêàÂ§ö‰∏™Ê†áÁ≠æÔºåËøõË°åÁ≤æÁ°ÆÊêúÁ¥¢„ÄÇ
-   **È´òÊÄßËÉΩÂõæÂ∫ì**:
    -   **ËôöÊãüÂåñÊªöÂä®**ÁöÑÁÄëÂ∏ÉÊµÅÂ∏ÉÂ±ÄÔºåËÉΩ‰ª•ÊûÅ‰ΩéÁöÑÂÜÖÂ≠òÂç†Áî®ËΩªÊùæÂ§ÑÁêÜÊï∞ÂçÉ‰∏™Êñá‰ª∂„ÄÇ
    -   ‰∏∫ÁõÆÂΩïÂíåÁº©Áï•ÂõæÔºàÂåÖÊã¨ËßÜÈ¢ëÔºâÊèê‰æõÂêéÁ´Ø**ÁºìÂ≠ò**ÔºåÂÆûÁé∞Ëøë‰πéÁßíÂºÄÁöÑÂä†ËΩΩÈÄüÂ∫¶„ÄÇ
-   **È´òÁ∫ßÁÅØÁÆ±È¢ÑËßàÂô®**:
    -   ÂèåÂáª‰ªªÊÑèÂ™í‰ΩìÊñá‰ª∂Âç≥ÂèØÊâìÂºÄ‰∏Ä‰∏™ÂÖ®Â±ÄÂÖ®Â±èÈ¢ÑËßàÂô®„ÄÇ
    -   **ÂõæÁâáÊü•ÁúãÂô®**: ÊîØÊåÅ‰ΩøÁî®Èº†Ê†áÊªöËΩÆËøõË°å**Áº©Êîæ**ÔºåÂπ∂ÈÄöËøáÊãñÂä®ËøõË°å**Âπ≥Áßª**„ÄÇ
    -   **ËßÜÈ¢ë/Èü≥È¢ëÊí≠ÊîæÂô®**: Êèê‰æõÂÆåÊï¥ÁöÑÊí≠ÊîæÊéßÂà∂ÂäüËÉΩ„ÄÇ
    -   **ÂõæÂ∫ìÂØºËà™**: ‰ΩøÁî®ÁïåÈù¢‰∏äÁöÑÁÆ≠Â§¥ÊàñÈîÆÁõòÊñπÂêëÈîÆËΩªÊùæÂàáÊç¢ÊµèËßàÂ™í‰Ωì„ÄÇ
-   **Â∑•‰ΩúÊµÅÈõÜÊàê**:
    -   ÈÄöËøá‚ÄúWorkflow‚ÄùÂæΩÁ´†‰ªéÂõæÁâáÂíåËßÜÈ¢ë‰∏≠**‰∏ÄÈîÆÂä†ËΩΩÂ∑•‰ΩúÊµÅ**„ÄÇ
    -   Êèê‰æõ‰∏ÄÂ•ó**‰∏ãÊ∏∏ËäÇÁÇπ**ÔºåÁî®‰∫éÂØπÊâÄÈÄâÂ™í‰ΩìËøõË°åÈ´òÁ∫ßÂ§ÑÁêÜ„ÄÇ

### ‚ö†Ô∏è ÂÖ≥‰∫é‰æùËµñÈ°πÁöÑÈáçË¶ÅËØ¥Êòé

‰∏∫‰∫ÜÊîØÊåÅËßÜÈ¢ëÂ§ÑÁêÜ„ÄÅÂÆâÂÖ®Âà†Èô§Êñá‰ª∂Á≠âÂº∫Â§ßÁöÑÊñ∞ÂäüËÉΩÔºåÊ≠§ÁâàÊú¨ÈúÄË¶ÅÂÆâË£Ö‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑPythonÂ∫ì„ÄÇ

**Êñ∞Â¢û‰æùËµñÂèäÂÖ∂Áî®ÈÄîÔºö**
* **`moviepy`**ÔºöÁî®‰∫éÂú®ÂõæÂ∫ì‰∏≠‰∏∫ËßÜÈ¢ëÊñá‰ª∂ÁîüÊàêÁº©Áï•Âõæ„ÄÇ
* **`opencv-python-headless`**Ôºö‰∏∫ `Select Original Video` ËäÇÁÇπÊèê‰æõËßÜÈ¢ëÂ∏ßÊèêÂèñÂäüËÉΩ„ÄÇ
* **`torchaudio`**Ôºö‰∏∫ `Select Original Audio` Âíå `Select Original Video` ËäÇÁÇπÊèê‰æõÈü≥È¢ëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ
* **`send2trash`**ÔºöÁ°Æ‰øùÊñá‰ª∂Âà†Èô§ÁöÑÂÆâÂÖ®ÊÄßÔºåÂÆÉ‰ºöÂ∞ÜÊñá‰ª∂ÁßªËá≥Á≥ªÁªüÁöÑÂõûÊî∂Á´ôËÄå‰∏çÊòØÊ∞∏‰πÖÂà†Èô§„ÄÇ

**ÂÆâË£ÖËØ¥ÊòéÔºö**
ÊúÄÁÆÄÂçïÁöÑÂÆâË£ÖÊñπÂºèÊòØ‰ΩøÁî® **ComfyUI Manager**„ÄÇÂú®Êõ¥Êñ∞Êú¨Êèí‰ª∂ÂêéÔºåÁÆ°ÁêÜÂô®‰ºöËá™Âä®Ê£ÄÊµãÂà∞Áº∫Â§±ÁöÑ‰æùËµñÈ°πÂπ∂ÊèêÁ§∫ÊÇ®ËøõË°åÂÆâË£Ö„ÄÇ

Â¶ÇÊûúÊÇ®Â∏åÊúõÊâãÂä®ÂÆâË£ÖÔºåÂèØ‰ª•ÊâìÂºÄÁªàÁ´ØÔºåËøõÂÖ•Êú¨Êèí‰ª∂ÁöÑÁõÆÂΩï (`ComfyUI/custom_nodes/ComfyUI_Local_Image_Gallery/`)ÔºåÁÑ∂ÂêéËøêË°å‰ª•‰∏ãÂëΩ‰ª§Ôºö
`pip install -r requirements.txt`

### ÂÆâË£ÖËØ¥Êòé

1.  ÂØºËà™Ëá≥ÊÇ®ÁöÑ ComfyUI ÂÆâË£ÖÁõÆÂΩï„ÄÇ
2.  ËøõÂÖ• `ComfyUI/custom_nodes/` Êñá‰ª∂Â§π„ÄÇ
3.  Â∞ÜÊ≠§Êèí‰ª∂ÁöÑ‰ªìÂ∫ìÂÖãÈöÜÊàñ‰∏ãËΩΩÂà∞ `custom_nodes` Êñá‰ª∂Â§π‰∏≠„ÄÇÊúÄÁªàÁöÑÊñá‰ª∂Â§πÁªìÊûÑÂ∫î‰∏∫ `ComfyUI/custom_nodes/ComfyUI_Local_Image_Gallery/`„ÄÇ
4.  ÈáçÂêØ ComfyUI„ÄÇ

### ‰ΩøÁî®ÊñπÊ≥ï

#### 1. ‰∏ªËäÇÁÇπ: `Local Media Manager`
ËøôÊòØÊÇ®ÊâÄÊúâÂ™í‰ΩìÊìç‰ΩúÁöÑ‰∏≠ÂøÉÊû¢Á∫Ω„ÄÇ

* **ÊµèËßàÊñá‰ª∂**:
    * ÁÇπÂáª**Èù¢ÂåÖÂ±ëÂØºËà™Ê†è**ÂèØ‰ª•Ë∑≥ËΩ¨Âà∞‰∏äÁ∫ßÁõÆÂΩïÔºåÊàñËÄÖÁõ¥Êé•ÁÇπÂáªÂÆÉÊù•ÊâãÂä®ËæìÂÖ•/Á≤òË¥¥ÂÆåÊï¥Ë∑ØÂæÑÔºåÁÑ∂ÂêéÊåâ`ÂõûËΩ¶`„ÄÇ
    * ‰ΩøÁî®**Ë∑ØÂæÑÈ¢ÑËÆæ**‰∏ãÊãâËèúÂçïÂèØ‰ª•‰øùÂ≠òÂπ∂Âø´ÈÄüËÆøÈóÆÂ∏∏Áî®Êñá‰ª∂Â§π„ÄÇ
    * ÁÇπÂáª `‚¨ÜÔ∏è Up` ÊåâÈíÆÂèØ‰ª•ËøîÂõû‰∏ä‰∏ÄÁ∫ßÁõÆÂΩï„ÄÇ
* **ÈÄâÊã©Êñá‰ª∂**:
    * **ÂçïÈÄâ**: ÂçïÂáª‰∏Ä‰∏™Âç°ÁâáÊù•ÈÄâ‰∏≠ÂÆÉ„ÄÇ
    -   **Â§öÈÄâ**: Êåâ‰Ωè `Ctrl` Âπ∂ÂçïÂáªÂç°ÁâáÔºåÂèØ‰ª•ÈÄâÊã©Â§ö‰∏™Êñá‰ª∂„ÄÇÊØè‰∏™ÈÄâ‰∏≠ÁöÑÊñá‰ª∂‰∏ä‰ºöÊòæÁ§∫‰∏Ä‰∏™Â∫èÂè∑„ÄÇ
    -   **ÂÖ®ÈÄâ**: ÁÇπÂáª `All` ÊåâÈíÆÔºåÂèØ‰ª•ÈÄâ‰∏≠ÂΩìÂâçËßÜÂõæ‰∏≠ÁöÑÊâÄÊúâÊñá‰ª∂„ÄÇ
* **Êñá‰ª∂ÁÆ°ÁêÜ**:
    * ÈÄâ‰∏≠Êñá‰ª∂ÂêéÔºå‰ΩøÁî® `‚ûî Move` Âíå `üóëÔ∏è Delete` ÊåâÈíÆËøõË°åÊâπÈáèÊìç‰Ωú„ÄÇ
    * Ë¶Å**ÈáçÂëΩÂêç**Êñá‰ª∂ÔºåËØ∑ÂÖà**ÂçïÈÄâ**‰∏Ä‰∏™Êñá‰ª∂ÔºåÁÑ∂ÂêéÁÇπÂáªÂÖ∂Âç°ÁâáÂè≥‰∏ãËßíÁöÑ `‚úèÔ∏è` ÂõæÊ†áÔºåÊ≠§Êó∂ÂõæÂ∫ì‰∏äÊñπÁöÑ‚ÄúÁºñËæëÊ†áÁ≠æ‚ÄùÂå∫Âüü‰ºöÂá∫Áé∞ÈáçÂëΩÂêçËæìÂÖ•Ê°Ü„ÄÇ
* **ÁÆ°ÁêÜÂÖÉÊï∞ÊçÆ**:
    -   **ËØÑÁ∫ß**: ÁÇπÂáª‰ªªÊÑèÂç°Áâá‰∏ãÊñπÁöÑÊòüÊòüÊù•ËøõË°åËØÑÂàÜ„ÄÇ
    -   **Ê†áÁ≠æ**: ÈÄâ‰∏≠‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÂêéÔºå‚ÄúÁºñËæëÊ†áÁ≠æ‚ÄùÂå∫ÂüüÂç≥‰ºöÊòæÁ§∫„ÄÇËæìÂÖ•Êñ∞Ê†áÁ≠æÂπ∂Êåâ`ÂõûËΩ¶`ÔºåÂç≥ÂèØÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞ÊâÄÊúâÈÄâ‰∏≠ÁöÑÊñá‰ª∂‰∏≠„ÄÇÁÇπÂáªÊ†áÁ≠æÊóÅÁöÑ `‚ìß` ÂèØÂ∞ÜÂÖ∂ÁßªÈô§„ÄÇ

#### 2. ‰∏ãÊ∏∏ËäÇÁÇπ
Â∞ÜËøô‰∫õËäÇÁÇπËøûÊé•Âà∞ `Local Media Manager` ÁöÑËæìÂá∫Á´ØÂè£Ôºå‰ª•Â§ÑÁêÜÊÇ®ÈÄâÊã©ÁöÑÂ™í‰Ωì„ÄÇ

* **`Select Original Image`**
    -   **Áî®ÈÄî**: ‰ªéÂ§öÈÄâÁöÑÂõæÁâá‰∏≠ÂàÜÁ¶ªÂá∫ÁâπÂÆö‰∏ÄÂº†ÔºåÂπ∂‰∏∫ÊÇ®ÁöÑÂ∑•‰ΩúÊµÅÂÅöÂ•ΩÂáÜÂ§á„ÄÇ
    -   **ËæìÂÖ•**:
        -   `paths`: ËøûÊé•Âà∞‰∏ªÂõæÂ∫ìËäÇÁÇπÁöÑ `paths` ËæìÂá∫„ÄÇ
        -   `index`: ÊÇ®ÊÉ≥‰ªéÊâπÊ¨°‰∏≠ÈÄâÊã©ÁöÑÂõæÁâáÂ∫èÂè∑Ôºà‰ªé0ÂºÄÂßãÔºâ„ÄÇ
        -   `generation_width`/`height`: ÊúüÊúõÁöÑËæìÂá∫ÂõæÂÉèÂ∞∫ÂØ∏„ÄÇ
        -   `aspect_ratio_preservation`: Â¶Ç‰ΩïÂ§ÑÁêÜÂõæÂÉèÁº©ÊîæÔºàÊãâ‰º∏„ÄÅË£ÅÂâ™Á≠âÔºâ„ÄÇ
    -   **ËæìÂá∫**:
        -   `image`: Â§ÑÁêÜÂêéÁöÑÂõæÂÉèÂº†ÈáèÔºàTensorÔºâ„ÄÇ
        -   `positive_prompt`/`negative_prompt`: Â¶ÇÊûúÂõæÁâáÂÖÉÊï∞ÊçÆ‰∏≠Â≠òÂú®ÔºåÂàôÊèêÂèñÂÖ∂Ê≠£Ë¥üÊèêÁ§∫ËØç„ÄÇ

* **`Select Original Video`**
    -   **Áî®ÈÄî**: ‰ªéÈÄâÂÆöÁöÑËßÜÈ¢ëÊñá‰ª∂‰∏≠ÊèêÂèñÂõæÂÉèÂ∏ßÂíå/ÊàñÈü≥È¢ë„ÄÇ
    -   **ËæìÂÖ•**:
        -   `paths`: ËøûÊé•Âà∞‰∏ªÂõæÂ∫ìËäÇÁÇπÁöÑ `paths` ËæìÂá∫„ÄÇ
        -   `index`: ÊÇ®ÊÉ≥ÈÄâÊã©ÁöÑËßÜÈ¢ëÂ∫èÂè∑„ÄÇ
        -   `frame_load_cap`: Ë¶ÅÊèêÂèñÁöÑÊúÄÂ§ßÂ∏ßÊï∞„ÄÇ
        -   `force_rate`: Âº∫Âà∂ÊåáÂÆöËæìÂá∫Â∫èÂàóÁöÑÂ∏ßÁéá„ÄÇ
        -   `skip_first_frames`: ‰ªéËßÜÈ¢ëÂºÄÂ§¥Ë∑≥ËøáÊåáÂÆöÊï∞ÈáèÁöÑÂ∏ßÂêéÂÜçÂºÄÂßãÊèêÂèñ„ÄÇ
        -   `select_every_nth`: ÈÄöËøá‰ªÖÊèêÂèñÊØèÁ¨¨NÂ∏ßÊù•ËøõË°åÈááÊ†∑„ÄÇ
    -   **ËæìÂá∫**:
        -   `IMAGE`: ‰∏ÄÊâπÂèØÁõ¥Êé•‰ΩøÁî®ÁöÑÂõæÂÉèÂ∏ß„ÄÇ
        -   `audio`: ‰ªéËßÜÈ¢ë‰∏≠ÊèêÂèñÁöÑÈü≥ËΩ®„ÄÇ

* **`Select Original Audio`**
    -   **Áî®ÈÄî**: ‰ªé‰∏Ä‰∏™Èü≥È¢ëÊñá‰ª∂‰∏≠Âä†ËΩΩÂπ∂Êà™ÂèñÁâπÂÆöÁâáÊÆµ„ÄÇ
    -   **ËæìÂÖ•**:
        -   `paths`: ËøûÊé•Âà∞‰∏ªÂõæÂ∫ìËäÇÁÇπÁöÑ `paths` ËæìÂá∫„ÄÇ
        -   `index`: ÊÇ®ÊÉ≥ÈÄâÊã©ÁöÑÈü≥È¢ëÊñá‰ª∂Â∫èÂè∑„ÄÇ
        -   `seek_seconds`: Èü≥È¢ëÁâáÊÆµÁöÑÂºÄÂßãÊó∂Èó¥ÔºàÂçï‰ΩçÔºöÁßíÔºâ„ÄÇ
        -   `duration`: ÊÇ®ÊÉ≥Ë¶ÅÁöÑÈü≥È¢ëÁâáÊÆµÊó∂ÈïøÔºàÂçï‰ΩçÔºöÁßíÔºâ„ÄÇ
    -   **ËæìÂá∫**:
        -   `audio`: Êà™ÂèñÂêéÁöÑÈü≥È¢ëÊï∞ÊçÆ„ÄÇ